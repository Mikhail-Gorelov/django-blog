{% load static %}
{% load i18n main %}
{% microservice_title as site_name %}
{% chat_site_init as site_init %}
{% block container %}
  <title>Django blog</title>

  {% block head %}
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;800;900&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link href="{% static 'user_profile/css/news-feed.css' %}" rel="stylesheet">
  {% endblock head %}

  <!------ BODY ---------->
  <script>
    $(document).ready(function () {
      $.getScript('{% static 'user_profile/js/news_feed.js' %}');
    })
  </script>
  <div class="container" id="real-estates-detail">
    <div class="row">
      <div class="col-12 col-lg-7 order-lg-1">
        <section class="py-4">
          <h1 class="h3">Feed</h1>
          <h2 class="h3">Articles</h2>
          {% for article in article_set %}
            <div class="mb-4 py-4">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-row align-items-center">
                  <div class="avatar mr-3"><img class="avatar-img" src="{{ article.author.image }}"
                                                alt="avatar">
                  </div>
                  <div>
                    <h2 class="h6 mb-0">{{ article.author.full_name }}</h2>
                    <p class="small text-muted mb-0">{{ article.updated }} ago</p>
                  </div>
                </div>
              </div>
              <img class="rounded w-100 mt-3" src="{{ article.image }}" alt="feed">
              <div class="mt-3">
                <h4 class="h5"> {{ article.title }} </h4>
                <p class="text-muted mb-0">{{ article.content }}</p>
              </div>
            </div>
          {% endfor %}
        </section>
        <section class="py-4">
          <h2 class="h3">Comments</h2>
          {% for comment in comment_set %}
            <div class="mb-4 py-4">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-row align-items-center">
                  <div class="avatar mr-3"><img class="avatar-img" src="{{ comment.user.image }}"
                                                alt="avatar">
                  </div>
                  <div>
                    <h2 class="h6 mb-0">{{ comment.user.full_name }}</h2>
                    <p class="small text-muted mb-0">{{ comment.updated }} ago</p>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <p class="text-muted mb-0">{{ comment.content }} to <strong>{{ comment.article.title }}</strong></p>
              </div>
            </div>
          {% endfor %}
        </section>
        <section class="py-4">
          <h2 class="h3">Followers</h2>
          {% for follower in following %}
            <div class="mb-4 py-4">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-row align-items-center">
                  <div class="avatar mr-3"><img class="avatar-img" src="{{ follower.subscriber.image }}"
                                                alt="avatar">
                  </div>
                  <div>
                    <h2 class="h6 mb-0">{{ follower.subscriber.full_name }}</h2>
                    <p class="small text-muted mb-0">{{ follower.date }} ago</p>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <p class="text-muted mb-0">Subscribed to you</p>
              </div>
            </div>
          {% endfor %}
        </section>
        <section class="py-4">
          <h2 class="h3">Likes</h2>
          {% for like in user_likes %}
            <div class="mb-4 py-4">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-row align-items-center">
                  <div class="avatar mr-3"><img class="avatar-img" src="{{ like.content_type.author.image }}"
                                                alt="avatar">
                  </div>
                  <div>
                    <h2 class="h6 mb-0">{{ like.content_type.author.full_name }}</h2>
                    <p class="small text-muted mb-0">{{ like.content_type.updated }} ago</p>
                  </div>
                </div>
              </div>
              <img class="rounded w-100 mt-3" src="{{ like.content_type.image }}" alt="feed">
              <div class="mt-3">
                <h4 class="h5"> {{ like.content_type.title }} </h4>
                <p class="text-muted mb-0">{{ like.content_type.content }}</p>
              </div>
              <div class="mt-3">
                <div class="d-flex flex-row align-items-center">
                  <div class="avatar mr-3"><img class="avatar-img" src="{{ like.user.image }}"
                                                alt="avatar">
                  </div>
                  <div>
                    {% if like.vote == 1 %}
                    <h2 class="h6 mb-0">{{ like.content_type.author.full_name }}</h2>
                    <p class="small text-muted mb-0">Liked this post</p>
                    {% endif %}
                    {% if like.vote == 0 %}
                    <h2 class="h6 mb-0">{{ like.content_type.author.full_name }}</h2>
                    <p class="small text-muted mb-0">Disliked this post</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </section>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
          integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
          crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
          integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
          crossorigin="anonymous"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    feather.replace();

    var mySwiper = new Swiper('.swiper-container', {
      // Optional parameters
      slidesPerView: 'auto',
      spaceBetween: 24,
    });
  </script>
{% endblock %}
