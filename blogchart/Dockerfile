FROM dtzar/helm-kubectl:2.12.1

RUN kubectl config set-cluster k8s --server="https://51.250.80.194" \
    && kubectl config set clusters.k8s.certificate-authority-data "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EVXdNekV4TURnMU1Wb1hEVE15TURRek1ERXhNRGcxTVZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT1dTCkQybm44ZytkV2hib0tKZ0pFVlVFQnNUSWJHQkVPYkJDUnljT2pncnZIMmlHTjlnUmhwbjliNWlNQnM3NFlUdzEKNTJ3RkNqNDE5eWpWbWdJMkF0eTh2TjROU0t0RjVqNkFQdkdWczVqQTVFVTkyb0NLR1BDOXErS3QzRVkrWE5McgpaTms0RVUrbXhCU3UybkUwOWJQUEtTTlI0Q3pNbkUrbUdOWjV4b3dieDRsUzZrYUovREpSU09hOGNKYklTOUt4CnlwakhpSTlOUEQ2NGp1RWdsU3B5SG5sMm9YdmJWUTFGM0JLaFlsaEtoRkU4K2RPcmk1c1Rob1dMNlh3cUdUb3kKS2U0TDJuVHNra3RuQ2k0RGZYWHdvcEFoSm5JSmsvQ2RoNkE3WnVrcWJraG5TSURvWXY5cGR0aWQwNmhHMzhyUApRZ0s0b0crQStETjNzRHFUWGtrQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZHdWNlOGxmbU9vYkxxb3JoOWVxMkQzVjU4ZnZNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFBVitxbUJOZGl4SjlaVWtyZ1h5RUd1N1Y0WVRoS1hlb2tFb1ZwRE9wbDRWTTc2T1BPSQpGaWZyaHREMWl3N2NCbFF2NkRqbVJocDNDTU45dGRWM0JWZGFVWWR5a3JqS0N2V0tyM3dwbllkWjR4YnNsSklRClYvbFd4M1ptVjZybkpWK1JTWTl2bGo0UHBXYzFwcGRhZHZKWEhUTy9xVEdKZEJEMUxEcEVMTnh5UUZuNUJIY1UKbmZhbnVLdEJVQlRlNGoveUNTUzBybTczSTY2VFlaRVpBK3h0R1E0V0ttOTRMbWl2SUF4dkRsQXJpdGUyem8rdQpMMWtseWxaVzU0TlNOY0ZKZmpkZnVVUTI0VzFXck5Lb2pwWjhuM25WS1M4ZFVDRENQOHVrMlB2cEQ3U3ZGWDJ4ClZ2aWFSR2tzcythdEV3QXg4ajdiOG1Fb0J1WEhLbUQ1a3lITQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==" \
    && kubectl config set-credentials yc-service-account --token="YCPTbRnJ1XacOYiEtv6wmOdhxjAKlyv44Uwsj6tF" \
    && kubectl config set-context default --cluster=k8s --user=yc-service-account \
    && kubectl config use-context default \
    && helm init --stable-repo-url https://charts.bitnami.com/bitnami \
    && helm dep build \
    && helm install blogchart .
